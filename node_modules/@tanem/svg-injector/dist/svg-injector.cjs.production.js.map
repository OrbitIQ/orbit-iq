{"version":3,"file":"svg-injector.cjs.production.js","sources":["../compiled/cache.js","../compiled/clone-svg.js","../compiled/is-local.js","../compiled/make-ajax-request.js","../compiled/request-queue.js","../compiled/load-svg-cached.js","../compiled/load-svg-uncached.js","../compiled/unique-id.js","../compiled/inject-element.js","../compiled/svg-injector.js"],"sourcesContent":["var cache = new Map();\nexport default cache;\n//# sourceMappingURL=cache.js.map","var cloneSvg = function (sourceSvg) {\n    return sourceSvg.cloneNode(true);\n};\nexport default cloneSvg;\n//# sourceMappingURL=clone-svg.js.map","var isLocal = function () { return window.location.protocol === 'file:'; };\nexport default isLocal;\n//# sourceMappingURL=is-local.js.map","import { parse as parseContentType } from 'content-type';\nimport isLocal from './is-local';\nvar makeAjaxRequest = function (url, httpRequestWithCredentials, callback) {\n    var httpRequest = new XMLHttpRequest();\n    httpRequest.onreadystatechange = function () {\n        try {\n            if (!/\\.svg/i.test(url) && httpRequest.readyState === 2) {\n                var contentType = httpRequest.getResponseHeader('Content-Type');\n                if (!contentType) {\n                    throw new Error('Content type not found');\n                }\n                var type = parseContentType(contentType).type;\n                if (!(type === 'image/svg+xml' || type === 'text/plain')) {\n                    throw new Error(\"Invalid content type: \".concat(type));\n                }\n            }\n            if (httpRequest.readyState === 4) {\n                if (httpRequest.status === 404 || httpRequest.responseXML === null) {\n                    throw new Error(isLocal()\n                        ? 'Note: SVG injection ajax calls do not work locally without ' +\n                            'adjusting security settings in your browser. Or consider ' +\n                            'using a local webserver.'\n                        : 'Unable to load SVG file: ' + url);\n                }\n                if (httpRequest.status === 200 ||\n                    (isLocal() && httpRequest.status === 0)) {\n                    callback(null, httpRequest);\n                }\n                else {\n                    throw new Error('There was a problem injecting the SVG: ' +\n                        httpRequest.status +\n                        ' ' +\n                        httpRequest.statusText);\n                }\n            }\n        }\n        catch (error) {\n            httpRequest.abort();\n            if (error instanceof Error) {\n                callback(error, httpRequest);\n            }\n            else {\n                throw error;\n            }\n        }\n    };\n    httpRequest.open('GET', url);\n    httpRequest.withCredentials = httpRequestWithCredentials;\n    if (httpRequest.overrideMimeType) {\n        httpRequest.overrideMimeType('text/xml');\n    }\n    httpRequest.send();\n};\nexport default makeAjaxRequest;\n//# sourceMappingURL=make-ajax-request.js.map","import cache from './cache';\nimport cloneSvg from './clone-svg';\nvar requestQueue = {};\nexport var clear = function () {\n    requestQueue = {};\n};\nexport var queueRequest = function (url, callback) {\n    requestQueue[url] = requestQueue[url] || [];\n    requestQueue[url].push(callback);\n};\nexport var processRequestQueue = function (url) {\n    var _loop_1 = function (i, len) {\n        setTimeout(function () {\n            if (Array.isArray(requestQueue[url])) {\n                var cacheValue = cache.get(url);\n                var callback = requestQueue[url][i];\n                if (cacheValue instanceof SVGSVGElement) {\n                    callback(null, cloneSvg(cacheValue));\n                }\n                if (cacheValue instanceof Error) {\n                    callback(cacheValue);\n                }\n                if (i === requestQueue[url].length - 1) {\n                    delete requestQueue[url];\n                }\n            }\n        }, 0);\n    };\n    for (var i = 0, len = requestQueue[url].length; i < len; i++) {\n        _loop_1(i, len);\n    }\n};\n//# sourceMappingURL=request-queue.js.map","import cache from './cache';\nimport cloneSvg from './clone-svg';\nimport makeAjaxRequest from './make-ajax-request';\nimport { processRequestQueue, queueRequest } from './request-queue';\nvar loadSvgCached = function (url, httpRequestWithCredentials, callback) {\n    if (cache.has(url)) {\n        var cacheValue = cache.get(url);\n        if (cacheValue === undefined) {\n            queueRequest(url, callback);\n            return;\n        }\n        if (cacheValue instanceof SVGSVGElement) {\n            callback(null, cloneSvg(cacheValue));\n            return;\n        }\n    }\n    cache.set(url, undefined);\n    queueRequest(url, callback);\n    makeAjaxRequest(url, httpRequestWithCredentials, function (error, httpRequest) {\n        var _a;\n        if (error) {\n            cache.set(url, error);\n        }\n        else if (((_a = httpRequest.responseXML) === null || _a === void 0 ? void 0 : _a.documentElement) instanceof SVGSVGElement) {\n            cache.set(url, httpRequest.responseXML.documentElement);\n        }\n        processRequestQueue(url);\n    });\n};\nexport default loadSvgCached;\n//# sourceMappingURL=load-svg-cached.js.map","import makeAjaxRequest from './make-ajax-request';\nvar loadSvgUncached = function (url, httpRequestWithCredentials, callback) {\n    makeAjaxRequest(url, httpRequestWithCredentials, function (error, httpRequest) {\n        var _a;\n        if (error) {\n            callback(error);\n        }\n        else if (((_a = httpRequest.responseXML) === null || _a === void 0 ? void 0 : _a.documentElement) instanceof SVGSVGElement) {\n            callback(null, httpRequest.responseXML.documentElement);\n        }\n    });\n};\nexport default loadSvgUncached;\n//# sourceMappingURL=load-svg-uncached.js.map","var idCounter = 0;\nvar uniqueId = function () { return ++idCounter; };\nexport default uniqueId;\n//# sourceMappingURL=unique-id.js.map","import { __spreadArray } from \"tslib\";\nimport loadSvgCached from './load-svg-cached';\nimport loadSvgUncached from './load-svg-uncached';\nimport uniqueId from './unique-id';\nvar injectedElements = [];\nvar ranScripts = {};\nvar svgNamespace = 'http://www.w3.org/2000/svg';\nvar xlinkNamespace = 'http://www.w3.org/1999/xlink';\nvar injectElement = function (el, evalScripts, renumerateIRIElements, cacheRequests, httpRequestWithCredentials, beforeEach, callback) {\n    var elUrl = el.getAttribute('data-src') || el.getAttribute('src');\n    if (!elUrl) {\n        callback(new Error('Invalid data-src or src attribute'));\n        return;\n    }\n    if (injectedElements.indexOf(el) !== -1) {\n        injectedElements.splice(injectedElements.indexOf(el), 1);\n        el = null;\n        return;\n    }\n    injectedElements.push(el);\n    el.setAttribute('src', '');\n    var loadSvg = cacheRequests ? loadSvgCached : loadSvgUncached;\n    loadSvg(elUrl, httpRequestWithCredentials, function (error, svg) {\n        if (!svg) {\n            injectedElements.splice(injectedElements.indexOf(el), 1);\n            el = null;\n            callback(error);\n            return;\n        }\n        var elId = el.getAttribute('id');\n        if (elId) {\n            svg.setAttribute('id', elId);\n        }\n        var elTitle = el.getAttribute('title');\n        if (elTitle) {\n            svg.setAttribute('title', elTitle);\n        }\n        var elWidth = el.getAttribute('width');\n        if (elWidth) {\n            svg.setAttribute('width', elWidth);\n        }\n        var elHeight = el.getAttribute('height');\n        if (elHeight) {\n            svg.setAttribute('height', elHeight);\n        }\n        var mergedClasses = Array.from(new Set(__spreadArray(__spreadArray(__spreadArray([], (svg.getAttribute('class') || '').split(' '), true), [\n            'injected-svg'\n        ], false), (el.getAttribute('class') || '').split(' '), true)))\n            .join(' ')\n            .trim();\n        svg.setAttribute('class', mergedClasses);\n        var elStyle = el.getAttribute('style');\n        if (elStyle) {\n            svg.setAttribute('style', elStyle);\n        }\n        svg.setAttribute('data-src', elUrl);\n        var elData = [].filter.call(el.attributes, function (at) {\n            return /^data-\\w[\\w-]*$/.test(at.name);\n        });\n        Array.prototype.forEach.call(elData, function (dataAttr) {\n            if (dataAttr.name && dataAttr.value) {\n                svg.setAttribute(dataAttr.name, dataAttr.value);\n            }\n        });\n        if (renumerateIRIElements) {\n            var iriElementsAndProperties_1 = {\n                clipPath: ['clip-path'],\n                'color-profile': ['color-profile'],\n                cursor: ['cursor'],\n                filter: ['filter'],\n                linearGradient: ['fill', 'stroke'],\n                marker: ['marker', 'marker-start', 'marker-mid', 'marker-end'],\n                mask: ['mask'],\n                path: [],\n                pattern: ['fill', 'stroke'],\n                radialGradient: ['fill', 'stroke'],\n            };\n            var element_1;\n            var elements_1;\n            var properties_1;\n            var currentId_1;\n            var newId_1;\n            Object.keys(iriElementsAndProperties_1).forEach(function (key) {\n                element_1 = key;\n                properties_1 = iriElementsAndProperties_1[key];\n                elements_1 = svg.querySelectorAll(element_1 + '[id]');\n                var _loop_1 = function (a, elementsLen) {\n                    currentId_1 = elements_1[a].id;\n                    newId_1 = currentId_1 + '-' + uniqueId();\n                    var referencingElements;\n                    Array.prototype.forEach.call(properties_1, function (property) {\n                        referencingElements = svg.querySelectorAll('[' + property + '*=\"' + currentId_1 + '\"]');\n                        for (var b = 0, referencingElementLen = referencingElements.length; b < referencingElementLen; b++) {\n                            var attrValue = referencingElements[b].getAttribute(property);\n                            if (attrValue &&\n                                !attrValue.match(new RegExp('url\\\\(\"?#' + currentId_1 + '\"?\\\\)'))) {\n                                continue;\n                            }\n                            referencingElements[b].setAttribute(property, 'url(#' + newId_1 + ')');\n                        }\n                    });\n                    var allLinks = svg.querySelectorAll('[*|href]');\n                    var links = [];\n                    for (var c = 0, allLinksLen = allLinks.length; c < allLinksLen; c++) {\n                        var href = allLinks[c].getAttributeNS(xlinkNamespace, 'href');\n                        if (href && href.toString() === '#' + elements_1[a].id) {\n                            links.push(allLinks[c]);\n                        }\n                    }\n                    for (var d = 0, linksLen = links.length; d < linksLen; d++) {\n                        links[d].setAttributeNS(xlinkNamespace, 'href', '#' + newId_1);\n                    }\n                    elements_1[a].id = newId_1;\n                };\n                for (var a = 0, elementsLen = elements_1.length; a < elementsLen; a++) {\n                    _loop_1(a, elementsLen);\n                }\n            });\n        }\n        svg.removeAttribute('xmlns:a');\n        var scripts = svg.querySelectorAll('script');\n        var scriptsToEval = [];\n        var script;\n        var scriptType;\n        for (var i = 0, scriptsLen = scripts.length; i < scriptsLen; i++) {\n            scriptType = scripts[i].getAttribute('type');\n            if (!scriptType ||\n                scriptType === 'application/ecmascript' ||\n                scriptType === 'application/javascript' ||\n                scriptType === 'text/javascript') {\n                script = scripts[i].innerText || scripts[i].textContent;\n                if (script) {\n                    scriptsToEval.push(script);\n                }\n                svg.removeChild(scripts[i]);\n            }\n        }\n        if (scriptsToEval.length > 0 &&\n            (evalScripts === 'always' ||\n                (evalScripts === 'once' && !ranScripts[elUrl]))) {\n            for (var l = 0, scriptsToEvalLen = scriptsToEval.length; l < scriptsToEvalLen; l++) {\n                new Function(scriptsToEval[l])(window);\n            }\n            ranScripts[elUrl] = true;\n        }\n        var styleTags = svg.querySelectorAll('style');\n        Array.prototype.forEach.call(styleTags, function (styleTag) {\n            styleTag.textContent += '';\n        });\n        svg.setAttribute('xmlns', svgNamespace);\n        svg.setAttribute('xmlns:xlink', xlinkNamespace);\n        beforeEach(svg);\n        if (!el.parentNode) {\n            injectedElements.splice(injectedElements.indexOf(el), 1);\n            el = null;\n            callback(new Error('Parent node is null'));\n            return;\n        }\n        el.parentNode.replaceChild(svg, el);\n        injectedElements.splice(injectedElements.indexOf(el), 1);\n        el = null;\n        callback(null, svg);\n    });\n};\nexport default injectElement;\n//# sourceMappingURL=inject-element.js.map","import injectElement from './inject-element';\nvar SVGInjector = function (elements, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.afterAll, afterAll = _c === void 0 ? function () { return undefined; } : _c, _d = _b.afterEach, afterEach = _d === void 0 ? function () { return undefined; } : _d, _e = _b.beforeEach, beforeEach = _e === void 0 ? function () { return undefined; } : _e, _f = _b.cacheRequests, cacheRequests = _f === void 0 ? true : _f, _g = _b.evalScripts, evalScripts = _g === void 0 ? 'never' : _g, _h = _b.httpRequestWithCredentials, httpRequestWithCredentials = _h === void 0 ? false : _h, _j = _b.renumerateIRIElements, renumerateIRIElements = _j === void 0 ? true : _j;\n    if (elements && 'length' in elements) {\n        var elementsLoaded_1 = 0;\n        for (var i = 0, j = elements.length; i < j; i++) {\n            injectElement(elements[i], evalScripts, renumerateIRIElements, cacheRequests, httpRequestWithCredentials, beforeEach, function (error, svg) {\n                afterEach(error, svg);\n                if (elements &&\n                    'length' in elements &&\n                    elements.length === ++elementsLoaded_1) {\n                    afterAll(elementsLoaded_1);\n                }\n            });\n        }\n    }\n    else if (elements) {\n        injectElement(elements, evalScripts, renumerateIRIElements, cacheRequests, httpRequestWithCredentials, beforeEach, function (error, svg) {\n            afterEach(error, svg);\n            afterAll(1);\n            elements = null;\n        });\n    }\n    else {\n        afterAll(0);\n    }\n};\nexport default SVGInjector;\n//# sourceMappingURL=svg-injector.js.map"],"names":["cache","Map","cloneSvg","sourceSvg","cloneNode","isLocal","window","location","protocol","makeAjaxRequest","url","httpRequestWithCredentials","callback","httpRequest","XMLHttpRequest","onreadystatechange","test","readyState","contentType","getResponseHeader","Error","type","parseContentType","concat","status","responseXML","statusText","error","abort","open","withCredentials","overrideMimeType","send","requestQueue","queueRequest","push","processRequestQueue","i","len","setTimeout","Array","isArray","cacheValue","get","SVGSVGElement","length","loadSvgCached","has","undefined","set","_a","documentElement","loadSvgUncached","idCounter","uniqueId","injectedElements","ranScripts","svgNamespace","xlinkNamespace","injectElement","el","evalScripts","renumerateIRIElements","cacheRequests","beforeEach","elUrl","getAttribute","indexOf","splice","setAttribute","svg","elId","elTitle","elWidth","elHeight","mergedClasses","from","Set","__spreadArray","split","join","trim","elStyle","elData","filter","call","attributes","at","name","prototype","forEach","dataAttr","value","elements_1","properties_1","currentId_1","newId_1","iriElementsAndProperties_1","clipPath","cursor","linearGradient","marker","mask","path","pattern","radialGradient","Object","keys","key","a","elementsLen","referencingElements","id","property","b","referencingElementLen","querySelectorAll","attrValue","match","RegExp","allLinks","links","c","allLinksLen","href","getAttributeNS","toString","d","linksLen","setAttributeNS","removeAttribute","script","scriptType","scripts","scriptsToEval","scriptsLen","innerText","textContent","removeChild","l","scriptsToEvalLen","Function","styleTags","styleTag","parentNode","replaceChild","SVGInjector","elements","_b","_c","afterAll","_d","afterEach","_e","_f","_g","_h","_j","elementsLoaded_1","j"],"mappings":"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"}